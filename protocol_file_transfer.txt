/*
 * File transfer protocol description
 */

Client: "HELLO", "filename"
Server response: "READY" or "ERROR", "descriptive text"

Client: "CHUNK", "filename", "offset", "size", "checksum", "data"
Server response: "READY" or "ERROR", "descriptive text"

Client: "CLOSE", "filename", "size"
Server response: "READY" or "ERROR", "descriptive text"

Protocol rules:
  1. First message: HELLO
  2. Then 0-* messages CHUNK. The filename must match the one in HELLO. The chunks in transit (=with no answer yet), as defined by offset and size, must not overlap.
  3. Last message: CLOSE. The filename must match the one in HELLO. All chunks must have been already transfered (no gaps). The size must match the size of the file transfered (size is equal to offset+size of the chunk with highest offset).
Error handling:
  1. HELLO: ERROR means no new transfer has been set up. If any file is already in transit, it's not affected.
  2. CHUNK: ERROR means this particular chunk is rejected. It does not affect any other chunk.
  3. CLOSE: ERROR means abort of the transfer of this filename. After ERROR, a new HELLO is necessary for any further transfer of this file.
What should work:
  1. Handle of multiple files in transfer from the same client.
  2. Hanlde of multiple clients.
  3. Reject attempts to transfer the same file from multiple requests (same client or different clients)
